<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../css/styles.css" />
  <title>Fun Apis</title>
</head>

<body id="body">
  <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
    <a href="../index.html"><img class="navbar-brand" src="../images/api-logo.png" height="128" width="128" alt="api-logo"></a>
    <button class="navbar-toggler" type="button" onclick="toggle()">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarToggler">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="../index.html">Home</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="#">Advice Generator<span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./love.html">Love Calculator</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="./memes.html">Meme Generator</a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="header" style="background-color:#e9ecef">
    <h1 class="display-1">Advice Slip API</h1>
    <hr />
    <button type="button" class="btn btn-info btn-lg" onclick="fetchAdvice()">Get Advice</button>
    <h1 id="advice" class="display-4"></h1>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="text-muted">
        This APIs used are the
        <a href="https://api.adviceslip.com/">Advice Slip</a>
        and the
        <a href="https://api.imgflip.com/">ImgFlip</a>
        APIs. The
        <a href="https://rapidapi.com/ajith/api/love-calculator">Love Calculator</a>
        API was not used as it no longer free.
      </div>
      <hr />
      <div class="text-muted">
        Website and Love Calculator Javascript Function created by Michael Black. See his work on Github
        <a href="https://github.com/michaelblack117/fun-apis">
          <i class="fa fa-github-alt" aria-hidden="true"></i>
        </a>
      </div>
    </div>
  </footer>
  
  <script>
    const fetchAdvice = async () => {
      const response = await fetch('https://api.adviceslip.com/advice');
      const json = await response.json();
      var textToWrite;
      if (json.slip) {
        textToWrite = json.slip.advice;
      }
      else {
        textToWrite = json.message.text;
      }
      document.getElementById("advice").innerText = textToWrite;
    }
    function toggle() {
      var body = document.getElementById("body");
      var toggler = document.getElementById("navbarToggler");
      if (toggler.className === "navbar-collapse") {
        toggler.className += " collapse";
        body.className = "padded";
      } else {
        toggler.className = "navbar-collapse";
        body.className = "padded-x";
      }
    }
  </script>
</body>

</html>
